<!-- 2116b45a-fe16-4a82-adc3-a5fc277d6265 0dc1b331-4389-408a-bc06-85b7e7ad566c -->
# Milestone 1 – World & Worker Drone (Rust/Bevy)

## Summary

Build a minimal Rust/Bevy game that renders a 64×64 grid at z=0 with randomly distributed stone and iron. Spawn a single worker drone that automatically mines a predefined rectangular area (hardcoded – no AST/LLM yet). Show stone/iron counts in a simple HUD.

## Deliverable

- Windows desktop executable (debug build) launching into a 2D top-down view
- 64×64 grid of colored tiles (Stone, Iron, Floor)
- One drone sprite/marker mining a fixed area until it’s exhausted
- HUD text: “Stone: N | Iron: M”

## Tech Stack

- Rust (stable)
- Bevy (2D): rendering, ECS, input, time, UI text
- rand: simple world generation

## Project Layout

- Cargo.toml (dependencies: bevy, rand)
- src/
  - main.rs (app, plugins, cameras)
  - render.rs (tile rendering, drone rendering)
  - resources.rs (global resource counts)
  - world/mod.rs (tiles, world grid, generation)
  - entities/worker.rs (drone components + mining behavior)
  - ui/hud.rs (top HUD text)

## Key Data Types (essential subset)

```rust
// src/world/mod.rs
#[derive(Clone, Copy, PartialEq, Eq)]
pub enum TileKind { Air, Stone, Iron, Floor }

pub struct Tile { pub kind: TileKind }

pub struct World {
    pub tiles: Vec<Tile>,
    pub width: i32,
    pub height: i32,
}

impl World {
    pub fn index(&self, x: i32, y: i32) -> usize { (y as usize) * (self.width as usize) + (x as usize) }
}
```
```rust
// src/resources.rs
pub struct Resources { pub stone: i32, pub iron: i32 }
```
```rust
// src/entities/worker.rs
use bevy::prelude::*;

#[derive(Component)]
pub struct WorkerDrone;

#[derive(Clone, Copy, PartialEq, Eq)]
pub enum DroneStatus { Idle, Working, Finished }

pub struct MiningArea { pub min_x: i32, pub min_y: i32, pub max_x: i32, pub max_y: i32 }
```

## Systems & Behavior

- Startup
  - Create camera (orthographic 2D)
  - Initialize `World` (64×64) with random stone/iron/floor distribution
  - Insert `Resources { stone: 0, iron: 0 }`
  - Spawn a `WorkerDrone` at a visible position
  - Define `MiningArea` centered near the drone (e.g., 10×10 box)
  - Spawn tile renderables and a simple marker for the drone
- Per-frame
  - Mining system (runs on a timer): iterate through `MiningArea`; when encountering `Stone`/`Iron`, convert to `Floor` and increment `Resources` (stone/iron accordingly). When all target tiles are mined, set drone `Finished`.
  - HUD system: update on-screen text with current `Resources`
  - Optional: simple camera controls (WASD pan, scroll zoom)

## Visuals (M1 minimal)

- Tiles as colored quads/rects:
  - Stone: dark gray; Iron: orange; Floor: light gray; Air not rendered
- Drone as a small colored square/circle
- HUD as Bevy UI text at top center: "Stone: N | Iron: M"

## Build & Run

- cargo run
- Expect: visible grid, a drone marker, resource counts increasing over time as the area is mined

## Acceptance Criteria

- Grid renders 64×64 at z=0
- Stone/Iron randomly present at start
- One worker mines a fixed area without user input
- Resource counters increase and stabilize once the area is exhausted
- No crashes; steady frame rate on Windows

### To-dos

- [ ] Create new Cargo project and add bevy, rand dependencies
- [ ] Add world grid, tile types, and random generation (64×64)
- [ ] Render tiles as colored quads and a drone marker
- [ ] Add worker drone components and spawn a single drone
- [ ] Mine a hardcoded rectangular area and update resources/tile kinds
- [ ] Show top HUD text with stone and iron counts
- [ ] Run on Windows; verify mining and HUD meet acceptance criteria